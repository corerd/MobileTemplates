/*
ChocolateChip-UI
Version 2.1.1
License: BSD
This version works with ChocolateChip.js, jQuery or Zepto. 
For jQuery, ChocolateChip-UI requires as a minimum version 1.7.1
When using Zepto, make sure you have the following modules included in your build: zepto, event, detect, fx, fx_methods, ajax, form, data, selector, stack. 
*/
(function(){var w=null;if(window.$chocolatechip){w=window.$chocolatechip;var x=window.$$chocolatechip;var y=true}if(window.jQuery){w=window.jQuery;var z=true}if(window.Zepto){w=window.Zepto;var A=true}var $=w;UIConvertElementMethods=function(a){for(var b in a){if(z||A){$.fn[b]=a[b]}else{if(a.hasOwnProperty(b)){var c={};c[b]=a[b];$.extend(HTMLElement.prototype,c)}}}};if(z||A){$.extend($,{concat:function(a){if(a instanceof Array){return a.join('')}else{a=$.slice.apply(arguments);return String.prototype.concat.apply(a.join(''))}},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()}});$.fn.findAll=function(a){return $(this).find(a)};$.fn.childElements=function(){return this.children()};$.fn.toggleClassName=function(a,b){if(!$(this).hasClass(a)){$(this).addClass(a);$(this).removeClass(b)}else{$(this).removeClass(a);$(this).addClass(b)}}}var B={reduceToNode:function(){var a=this.nodeName?this:this[0];return a},UIIdentifyChildNodes:function(){var a=this.nodeType===1?this:this[0];var b=a.childElementCount;for(var i=0;i<b;i++){a.children[i].setAttribute('ui-child-position',i)}},_first:function(){if(y){return this.first()}else{return $(this).children().first()}},_last:function(){if(y){return this.last()}else{return $(this).children().last()}},UIBlock:function(a){a=a?" style='opacity:"+a+"'":"";$(this).before("<mask"+a+"></mask>");return this},UIUnblock:function(){$._each($.els('mask'),function(a,b){$(b).remove()});$('view[ui-navigation-status=current]').removeAttr('aria-hidden');return this},ariaHide:function(){var c=$(this);c.attr('aria-hidden','true');var d=$.els('*',c);$._each(d,function(a,b){$(b).data('savedAriaHidden',$(b).attr('aria-hidden'));if($(b).attr('aria-hidden')){$(b).data('savedAriaHidden',$(b).attr('aria-hidden'))}$(b).attr('aria-hidden','true')});c.addClass('ariaHidden')},ariaShow:function(){var d=$(this);d.attr({'aria-hidden':'false'});var e=$.els('*',d);$._each(e,function(a,b){var c;try{c=$(b).data('savedAriaHidden')}catch(err){}if(!c){$(b).removeAttr('aria-hidden')}else{$(b).attr('aria-hidden',c)}});d.removeClass('ariaHidden')},ariaFocus:function(){var a=this.reduceToNode();if(a){if(a.tagName!=="A"&&a.tagName!=="TEXTAREA"){$(a).attr('tabindex',-1)}$(a).focus()}return this},ariaFocusChild:function(a){a=a||'h1';var b=this;$(b).find(a).ariaFocus();return this},UIRemovePopupBtnEvents:function(a,b){$(this).off(a,b,false)},UIToggleButtonLabel:function(a,b){if($('label',this).text()===a){$('label',this).text(b)}else{$('label',this).text(a)}},UISelectionList:function(g){var h=this;var i=this.childElements();if(z||A){i=$(i)}$._each(i,function(d,e){if(e.nodeName.toLowerCase()==='tablecell'){var f='<checkmark>&#x2713</checkmark>';$(e).attr('role','radio');$(e).attr('aria-checked','false');$(e).append(f);$(e).on($.userAction,function(){if($.userAction==='touchend'){$(e).removeClass('touched');$(e).attr('aria-checked','false')}var c=this;setTimeout(function(){if($.UIScrollingActive)return;$._each(i,function(a,b){$(b).removeClass('selected');$(b).removeClass('touched');$(b).attr('aria-checked','false')});$(c).addClass('selected');$(c).attr('aria-checked','true');$(c).find('input').checked=true;if(g){g.call(g,$(c).find('input'))}},100)});$(e).on('touchstart',function(){$(this).addClass('touched')});$(e).on('touchcancel',function(){$(this).removeClass('touched')})}})},UISwitchControl:function(a){a=a||function(){return false};var b=this.reduceToNode();if(b.nodeName.toLowerCase()==="switchcontrol"){$(b).attr('role','radio');a.call(a,this);var c=$(this).find('input');c=c.reduceToNode();if($(this).hasClass("off")){$(this).toggleClassName("on","off");$(this).attr('aria-checked','true');c.checked=true;$(this).find("thumb").focus()}else{$(this).attr('aria-checked','false');$(this).toggleClassName("on","off");c.checked=false}}else{return}},UICreateSwitchControl:function(a){var b=a.id;var c='';if(a.namePrefix){c="name='"+a.namePrefix+"."+a.id+"'"}else{c="name='"+b+"'"}var d=" ";d+=a.customClass?a.customClass:"";var e=a.status||"off";var f=a.kind?" ui-kind='"+a.kind+"'":"";var g='';if(a.uiImplements){g=" ui-implements='"+a.uiImplements+"'"}var h="ON";var i="OFF";if(a.kind==="traditional"){if(!!a.labelValue){h=a.labelValue[0];i=a.labelValue[1]}}var j=a.value||"";var k=a.callback||function(){return false};var l=(a.kind==="traditional")?$.concat('<label ui-implements="on">',h,'</label><thumb></thumb><label ui-implements="off">',i,'</label>'):"<thumb></thumb>";var m=$.concat('<switchcontrol ',f,' class="',e," ",d,'" ',g,'id="',b,'"','>',l,'<input type="checkbox" ',c,' style="display: none;" value="',j,'"></switchcontrol>');if($(this).css("position")!=="absolute"){this.css("position: relative;")}$(this).append(m);var n="#"+b;if(A){$(n).find("input").attr("checked",(e==="on"?true:false))}else{$(n).find("input").prop("checked",(e==="on"?true:false))}$(n).on($.userAction,function(){$(this).UISwitchControl(k)})},UIInitSwitchToggling:function(){var f=$.els('switchcontrol',$.app);var g=this;$._each(f,function(a,b){var c=b.nodeType===1?$.ctx(b):$.ctx(this);var d=$(c).find('input[type="checkbox"]');d=d.reduceToNode();if($(c).hasClass('on')){$(c).checked=true;d.checked=true}else{$(c).checked=false;d.checked=false}$(c).on($.userAction,function(e){e.preventDefault();this.parentNode.style.backgroundImage='none';$(c).UISwitchControl()})})},UICreateSegmentedControl:function(a){position=a.position||null;var b="<segmentedcontrol";if(a.id){b+=" id='"+a.id+"'"}if(a.placement){b+=" ui-bar-align='"+a.placement+"'"}if(a.selectedSegment||a.selectedSegment===0){b+=" ui-selected-index='"+a.selectedSegment+"'"}else{b+=" ui-selected-index=''"}if(a.container){b+=" ui-segmented-container='#"+a.container+"'"}var c=a.cssClass||"";b+=">";if(a.numberOfSegments){segments=a.numberOfSegments;var d=1;for(var i=0;i<segments;i++){b+="<uibutton";b+=" id='"+$.UIUuid()+"'";b+=" class='"+c[d-1];if(a.selectedSegment||a.selectedSegment===0){if(a.selectedSegment===i){b+=" selected'"}}if(a.disabledSegment){if(a.disabledSegment===i){b+=" disabled'"}}b+="'";b+=" ui-kind='segmented'";if(a.placementOfIcons){b+=" ui-icon-alignment='"+a.placementOfIcons[d-1]+"'"}b+=">";if(a.iconsOfSegments){if(!!a.iconsOfSegments[i]){b+="<icon ui-implements='icon-mask' style='-webkit-mask-box-image: url(icons/"+a.iconsOfSegments[d-1]+"."+a.fileExtension[d-1]+")'  ui-implements='icon-mask'></icon>"}}if(a.titlesOfSegments){b+="<label>"+a.titlesOfSegments[d-1]+"</label>"}b+="</uibutton>";d++}b+="</segmentedcontrol>";$(this).append(b)}},UISegmentedControl:function(k,l){var m=$(this);var n=null;l=l||$.noop;if(!$(this).attr('ui-selected-segment')){$(this).attr('ui-selected-segment','')}if($(this).attr('ui-selected-index')){n=$(this).attr('ui-selected-index');try{var o=$(this).childElements();var p=o.eq(n);p=$(p).attr('id');$(this).attr('ui-selected-segment',p);o.eq(n).addClass('selected')}catch(e){}}else{$._each($(this).childElements(),function(a,b){if($(b).hasClass('selected')){if(a===0){$(b).attr('ui-selected-index','0')}else{$(b).attr('ui-selected-index',a)}}})}if(k){$(this).attr('ui-segmented-container',k);k=$(k);if(n||n==0){k.attr('ui-selected-index',n)}var q=y?[].slice.apply(k.children):$(k).children();$._each(q,function(a,b){$(b).css('display','none')});q.eq(n).css('display','block');m.attr('ui-segmented-container',('#'+k.attr('id')));var r=$(this).attr('ui-selected-index');k.closest('scrollpanel').data('ui-scroller').refresh()}$._each($(this).childElements(),function(i,j){if(!$(j).attr('id')){$(j).attr('id',$.UIUuid())}if(!m.attr('ui-selected-segment')){if($(j).hasClass('selected')){m.attr('ui-selected-segment',$(j).attr('id'))}}$(j).on($.userAction,function(){var a=m.attr('ui-selected-segment');a=$('#'+a);var b=m.attr('ui-selected-index');var c=null;var d=null;var e=$(this).closest('segmentedcontrol');if(e.attr('ui-segmented-container')){d=e.attr('ui-segmented-container')}var f=$(d).childElements();var g=null;if(e.attr('ui-selected-index')){g=e.attr('ui-selected-index')}var h=null;if(!a){h=$(this).attr('ui-child-position');m.attr('ui-selected-index',h);m.attr('ui-selected-segment',$(this).attr('id'));$(this).addClass('selected');c=$(this).attr('ui-child-position');f.eq(n).css('display','none');f.eq(c).css('display','none')}if(a){h=$(this).attr('ui-child-position');m.attr('ui-selected-index',h);a.removeClass('selected');m.attr('ui-selected-segment',$(this).attr('id'));$(this).addClass('selected');c=$(this).attr('ui-child-position');if(m.attr('ui-segmented-container')){d=$(m.attr('ui-segmented-container'));f.eq(g).css('display','none');f.eq(h).css('display','block');f.eq(a.attr('ui-child-position')).css('display','none');d.closest('scrollpanel').data('ui-scroller').refresh()}}$(this).addClass('selected');l.call(l,j)})});$(this).UIIdentifyChildNodes()},UICreateTabBar:function(a){var b=a.id||$.UIUuid();var c=a.imagePath||'icons\/';var d=a.numberOfTabs||1;var e=a.tabLabels;var f=a.iconsOfTabs;var g=a.selectedTab||0;var h=a.disabledTab||null;var j=["<tabbar ui-selected-tab='",g,"'>"];$(this).attr("ui-tabbar-id",b);for(var i=0;i<d;i++){j.push("<uibutton ui-implements='tab' ");if(i===g||i===h){j.push("class='");if(i===g){j.push("selected")}if(i===h){j.push("disabled")}j.push("'")}j.push("><icon style='-webkit-mask-image: url(");j.push(c);j.push(f[i]);j.push(".svg);'></icon>");j.push("<label>");j.push(e[i]);j.push("</label></uibutton>")}j.push("</tabbar>");$(this).append(j.join(''));var k=$.els("subview",this);k.eq(g).addClass("selected");this.UITabBar()},UITabBar:function(){var d=$.els('tabbar > uibutton[ui-implements=tab]',this);var e=$('tabbar',this);e.UIIdentifyChildNodes();var f=$.els('subview',this);$._each(f,function(a,b){$(b).addClass('unselected')});var g=e.attr('ui-selected-tab')||0;f.eq(g).toggleClassName('unselected','selected');d.eq(g).addClass('selected');var h=$.userAction==='click'?'click':'touchstart';$._each(d,function(b,c){$(c).on(h,function(){if($(c).hasClass('disabled')||$(c).hasClass('selected')){return}var a=$(c).closest('tabbar').attr('ui-selected-tab');d.eq(a).removeClass('selected');$(c).addClass('selected');f.eq(a).removeClass('selected');f.eq(a).addClass('unselected');f.eq($(c).attr('ui-child-position')).addClass('selected');f.eq(c.getAttribute('ui-child-position')).removeClass('unselected');e.attr('ui-selected-tab',$(c).attr('ui-child-position'))})})},UITabBarForViews:function(){var d=$.els('tabbar > uibutton[ui-implements=tab]',this);$('tabbar',this).UIIdentifyChildNodes();var e=$('tabbar',this);var f=$.els('view',this);$._each(f,function(a,b){$(b).attr('ui-navigation-status','upcoming')});var g=e.attr('ui-selected-tab')||0;f.eq(g).attr('ui-navigation-status','current');d.eq(g).addClass('selected');var h=$.userAction==='click'?'click':'touchstart';$._each(d,function(b,c){$(c).on(h,function(){if($(c).hasClass('disabled')||$(c).hasClass('selected')){return}var a=$(c).closest('tabbar').attr('ui-selected-tab');d.eq(a).removeClass('selected');$(c).addClass('selected');f.eq(a).attr('ui-navigation-status','upcoming');f.eq($(c).attr('ui-child-position')).attr('ui-navigation-status','current');e.attr('ui-selected-tab',$(c).attr('ui-child-position'))})})},UISegmentedPagingControl:function(){var e=$('segmentedcontrol[ui-implements="segmented-paging"]',this);var f=e.attr('ui-paging');e.attr('ui-paged-subview','0');e._first().addClass('disabled');var g=$.els('subview',this);e.attr('ui-pagable-subviews',g.length);var h=0;$._each(g,function(a,b){$(b).attr('ui-navigation-status','upcoming');$(b).attr('ui-child-position',h);h++;$(b).attr('ui-paging-orient',f)});var i=$(e._first());var j=$(e._last());g.eq(0).attr('ui-navigation-status','current');e.delegate('uibutton','click',function(a){var b=a.nodeType===1?$.ctx(a):$.ctx(this);if($(b).hasClass('disabled'))return;var c=e;if(b.isSameNode(b.parentNode.firstElementChild)){if(c.attr('ui-paged-subview')==1){$(b).addClass('disabled');c.attr('ui-paged-subview','0');g.eq(0).attr('ui-navigation-status','current');g.eq(1).attr('ui-navigation-status','upcoming')}else{$(g[c.attr('ui-paged-subview')-1]).attr('ui-navigation-status','current');$(g[c.attr('ui-paged-subview')]).attr('ui-navigation-status','upcoming');c.attr('ui-paged-subview',c.attr('ui-paged-subview')-1);$(b).next().removeClass('disabled');if(c.attr('ui-paged-subview')<=0){$(b).addClass('disabled')}}}else{i.removeClass('disabled');var d=Number(c.attr('ui-paged-subview'));if(d===Number(e.attr('ui-pagable-subviews'))-2){$(b).addClass('disabled')}$(g[d]).attr('ui-navigation-status','traversed');$(g[d+1]).attr('ui-navigation-status','current');c.attr('ui-paged-subview',d+1)}})},UIExpander:function(b){b=b||{};var c=b.status||'expanded';var d=b.title||'Open';var e=b.altTitle||'Close';var f=$(this);var g=$('panel',this);var h='<header><label></label></header>';g.attr('ui-height',parseInt(g.css('height'),10));$(this).prepend(h);if(c==='expanded'){f.toggleClassName('ui-status-expanded','ui-status-collapsed');$('label',this).text(e);g.style.height=g.getAttribute('ui-height')+'px';g.css('opacity: 1;')}else{$('label',this).text(d);g.css({'height':'0px','opacity':0});f.toggleClass('ui-status-collapsed','ui-status-expanded')}$('header',f).on('click',function(){var a=$(this);if(g.css('height')=='10px'||g.css('height')=='0px'){g.css('height',g.attr('ui-height')+'px');g.css('opacity',1);$('label',a).text(e);f.toggleClassName('ui-status-collapsed','ui-status-expanded')}else{g.css({'height':'0px','opacity':0});$('label',a).text(d);f.toggleClassName('ui-status-expanded','ui-status-collapsed')}})},UICalculateNumberOfLines:function(){var a=parseInt($(this).css('line-height'),10);var b=parseInt($(this).css('height'),10);var c=Math.floor(b/a);return c},UIParagraphEllipsis:function(){var a=$(this).UICalculateNumberOfLines();var b=this.reduceToNode();b.style.WebkitLineClamp=a},UIProgressBar:function(a){a=a||{};var b=a.className||false;var c=a.width||100;var d=a.speed||5;var e=a.position||'after';var f=a.margin||'10px auto';var g=b?' class="'+b+'"':'';var h=$.concat('<progressbar',g," style='width: ",c,"px;"," -webkit-animation-duration: ",d,"s;"," margin: ",f,";'","></progressbar>");return $(this).append(h)},UIHideNavBarHeader:function(){$(this).css({'visibility':'hidden','position':'absolute'})},UIShowNavBarHeader:function(){$(this).css({'visibility':'visible','position':'static'})},UIActionSheet:function(c){var d=this;var e=c.id;var f=c.color||'undefined';var g=$.concat('<h3>',c.title,'</h3>');var h="",uiButtonObj,uiButtonImplements,uiButtonTitle,uiButtonCallback;if(!!c.uiButtons){$._each(c.uiButtons,function(a,b){uiButtonTitle=b.title;uiButtonImplements=b.uiButtonImplements||"";uiButtonCallback=b.callback;e.trim();h+=$.concat("<uibutton ui-kind='action' ",' ui-implements="',uiButtonImplements,'" class="stretch" onclick="',uiButtonCallback,'(\'#',e,'\')"><label>',uiButtonTitle,"</label></uibutton>")})}var i=function(){var a='';if(f)a=$.concat(" ui-action-sheet-color='",f,"'");var b=$.concat("<actionsheet id='",e,"' class='hidden' aria-hidden='true' role='dialog' style='display:none' ui-contains='action-buttons'",a,"><scrollpanel ui-scroller='",$.UIUuid(),"'><panel>",g,h,"<uibutton ui-kind='action' ui-implements='cancel' class='stretch' onclick='$.UIHideActionSheet(\"#",e,"\")'><label>Cancel</label></uibutton></panel></scrollpanel></actionsheet>");$(d).append(b)};i();var j=$("#"+e);j.attr('aria-hidden','true');var k=j.find('scrollpanel');var l=k.reduceToNode();k.data('ui-scroller',new iScroll(l));var m=$.concat("#",e," uibutton");$._each($.els(m),function(a,b){$(b).on("click",function(){$.UIHideActionSheet()})})},UICenterElementToParent:function(){var a=$(this);if(!a.reduceToNode())return;var b=a.parent();var c;var d=0;var e=0;if(a.css('position')!=='absolute')c='relative';else c='absolute';var f,width,parentHeight,parentWidth;if(c==='absolute'){f=a.clientHeight;width=a.clientWidth;parentHeight=b.clientHeight;parentWidth=b.clientWidth}else{f=parseInt(a.css('height'),10);width=parseInt(a.css('width'),10);parentHeight=parseInt(b.css('height'),10);parentWidth=parseInt(b.css('width'),10)}parentNodeName=b.reduceToNode();if(z){parentHeight+=parseInt(b.css('padding-top'),10);parentHeight+=parseInt(b.css('padding-bottom'),10);parentWidth+=parseInt(b.css('padding-left'),10);parentWidth+=parseInt(b.css('padding-right'),10)}var g,tmpLeft;if(parentNodeName.nodeName=='app'){g=((window.innerHeight/2)+window.pageYOffset)-f/2+'px';tmpLeft=(((window.innerWidth/2)-width)/2+'px')}else{d=parseInt(b.css('padding-top'),10);e=parseInt(b.css('padding-left'),10);g=(parentHeight/2)-(f/2)-d+'px';tmpLeft=(parentWidth/2)-(width/2)-e+'px'}a.css({position:c,left:tmpLeft,top:g})},UIActivityIndicator:function(b){b=b||{};var c;var d=b.color||'#000';var e=b.size||'80px';var f=b.position||null;var g=b.modal||false;var h=b.modalMessage?$.concat('<h5 role="dialog">',b.modalMessage,'</h5>'):'';var i=$.UIUuid();var j=b.duration||'1s';var k=$.concat('background-color:',d,'; height:',e,';  width:',e);var l;if(g){c=document.createElement('panel');$(c).attr('ui-implements','modal-activity-indicator');$(c).attr('aria-visiblity','visible');$(c).attr('role','dialog');$(c).attr('id',i);$(c).css({'display':'-webkit-box','-webkit-box-orient':'vertical','-webkit-box-align':'center','-webkit-box-pack':'center','background-color':'rgba(0,0,0,0.5)','border-radius':'20px','height':'120px','width':'200px','z-index':11111});l=document.createElement('activityindicator');$(l).css({'background-color':'#fff','height':'50px','width':'50px','-webkit-animation-duration':j});$(l).attr('role','progressbar');$(c).append(l);if(h){$(c).append(h)}$(this).append(c);$('view[ui-navigation-status=current]').css('display','none');$(c).ariaFocusChild('h5');$('view[ui-navigation-status=current]').css('display','-webkit-box');$(c).find('h5').focus();$('#'+i).UIBlock('0.5');var m=$('#'+i);m.UICenterElementToParent();window.onresize=function(a){try{m.UICenterElementToParent()}catch(err){}};$(document.body).on('orientationchange',function(){$('#'+i).UICenterElementToParent()},false)}else{var n=A?null:{'-webkit-animation-duration':j};l=document.createElement('activityindicator');$(l).css({'background-color':d,'height':e,'width':e});if(n)$(l).css(n);$(l).attr('role','progressbar');if(f)$(l).attr('ui-bar-align',f);return $(this).append(l)}return this},RemoveUIAcitivityIndicator:function(){$(this).UIUnblock();try{var a=$(this).find('panel[ui-implements=modal-activity-indicator]');a.remove()}catch(error){}var b=$(this).find('activityindicator');b.remove()},UISetTranstionType:function(a){$(this).attr('ui-transition-type',a)},UIFlipSubview:function(a){var b=$(this).closest("view");a=a||"left";b.UISetTranstionType("flip-"+a);$(this).on("click",function(){switch(a){case"right":b.find("subview:nth-of-type(1)").toggleClassName("flip-right-front-in","flip-right-front-out");b.find("subview:nth-of-type(2)").toggleClassName("flip-right-back-in","flip-right-back-out");break;case"left":b.find("subview:nth-of-type(1)").toggleClassName("flip-left-front-in","flip-left-front-out");b.find("subview:nth-of-type(2)").toggleClassName("flip-left-back-in","flip-left-back-out");break;case"top":b.find("subview:nth-of-type(2)").toggleClassName("flip-top-front-in","flip-top-front-out");b.find("subview:nth-of-type(1)").toggleClassName("flip-top-back-in","flip-top-back-out");break;case"bottom":b.find("subview:nth-of-type(2)").toggleClassName("flip-bottom-front-in","flip-bottom-front-out");b.find("subview:nth-of-type(1)").toggleClassName("flip-bottom-back-in","flip-bottom-back-out");break;default:b.find("subview:nth-of-type(1)").toggleClassName("flip-right-front-in","flip-right-front-out");b.find("subview:nth-of-type(2)").toggleClassName("flip-right-back-in","flip-right-back-out")}})},UIPopSubview:function(){var a=$(this).closest("view");a.UISetTranstionType("pop");$(this).on("click",function(){$("subview:nth-of-type(2)",a).toggleClassName("pop-in","pop-out")})},UIFadeSubview:function(){var a=$(this).closest("view");a.UISetTranstionType("fade");a.attr("ui-transition-type","fade");$(this).on("click",function(){$("subview:nth-of-type(2)",a).toggleClassName("fade-in","fade-out")})},UISpinSubview:function(a){var b=$(this).closest("view");b.UISetTranstionType("spin");if(!a||a==="left"){$(this).UISetTranstionType("left");$(this).on("click",function(){$("subview:nth-of-type(2)",b).toggleClassName("spin-left-in","spin-left-out")})}else if(a==="right"){$(this).UISetTranstionType("right");$(this).on("click",function(){$("subview:nth-of-type(2)",b).toggleClassName("spin-right-in","spin-right-out")})}else{$(this).UISetTranstionType("left");$(this).on("click",function(){$("subview:nth-of-type(2)",b).toggleClassName("spin-left-in","spin-left-out")})}},UIRepositionPopover:function(){var a=$(this).attr("data-popover-trigger");var b=$(this).attr("data-popover-orientation");var c=$(this).attr("data-popover-pointer-orientation");var d=$.determinePopoverPosition(a,b,c);$(this).css(d)},UIAdjustPopoverPosition:function(){var a=window.innerHeight;var b=window.innerWidth;var c=this.offsetHeight;var d=this.offsetWidth;var e=$(this).offset();var f=e.top;var g=e.left;var h=f+c;var i=g+d;if(h>a){this.style.top=a-c-10+"px"}if(i>b){this.style.left=b-10+"px"}}};UIConvertElementMethods(B);$(function(){if(y){$._each=function(a,b){var i,key;if(typeof a.length==='number'){for(i=0;i<a.length;i++){if(b.call(a[i],i,a[i])===false){return a}}}else{for(key in a){if(b.call(a[key],key,a[key])===false){return a}}}return this}}else{$._each=$.each}$.el=function(a){if(typeof a==='string'){return document.querySelector(a)}if(a instanceof Object){return a[0]}if(a.nodeType===1){return a}};$.els=function(a,b){if(y){if(b){return x(a,b)}else{return x(a)}}else{if(b){return $(a,b)}else{return $(a)}}};if(!$.show){$.extend(HTMLElement.prototype,{show:function(){var a=this.attr('ui-display')||this.css('display');this.style.display=a},hide:function(){var a=this.css('display');this.attr('ui-display',a);this.style.display='none'}})}$.body=$("body");$.app=$("app");$.main=$("#main");$.views=$.els('view');$.touchEnabled=('ontouchstart'in window);$.userAction='touchend';if(!$.touchEnabled){var t=$('head').find('link[rel=stylesheet]').attr('href');var u='';if(/min/.test(t)){u=t.replace(/chui\.ios\.min\.css/,'chui.ios.desktop.css')}else{u=t.replace(/chui\.ios\.css/,'chui.ios.desktop.css')}$('head').append(['<link rel="stylesheet" href="',u,'">'].join(''));$.userAction='click'}if(z||A){$.fn.hasAttr=function(a){return $(this).attr(a)};$.slice=Array.prototype.slice}var v=$.els('tablecell');$._each(v,function(a,b){if($(b).hasAttr('href')){$(b).attr('role','button');$(b).closest('tableview').attr('role','list')}else{$(b).attr('role','listitem')}});$.extend($,{UIUuidSeed:0,UIUuid:function(){$.UIUuidSeed++;var a=Date.now()+$.UIUuidSeed;return a.toString(36)},ctx:function(a){try{return(a.nodeType!==1&&typeof a==='object'&&!a.length)?a[0]:a}catch(err){};return this},UIEnableScrolling:function(d){d=d||{};$._each($.els("scrollpanel"),function(a,b){var c=new iScroll(b,d);$(b).data("ui-scroller",c)})},UINavigationHistory:['#main'],UINavigateBack:function(){var a=$.UINavigationHistory[$.UINavigationHistory.length-1];$.UINavigationHistory.pop();$($.UINavigationHistory[$.UINavigationHistory.length-1]).css('visibility','visible');$($.UINavigationHistory[$.UINavigationHistory.length-1]).attr('ui-navigation-status','current');$($.UINavigationHistory[$.UINavigationHistory.length-1]).attr('aria-hidden','false');$(a).attr('ui-navigation-status','upcoming');$(a).attr('aria-hidden','true');$(a).css('visibility','hidden');if($.app.attr('ui-kind')==='navigation-with-one-navbar'&&$.UINavigationHistory[$.UINavigationHistory.length-1]==='#main'){$('navbar > uibutton[ui-implements=back]',$.app).css('display','none')}},UINavigationListExits:false,UINavigationEvent:false,UINavigationList:function(){var e=function(b){var c='#main';b=$(b);b.attr('role','link');var d=b.attr('href');if(/^#/.test(d)==false)return;try{if($.app.attr('ui-kind')==='navigation-with-one-navbar'){$('navbar > uibutton[ui-implements=back]',$.app).css('display: block;')}$(b.attr('href')).attr('ui-navigation-status','current');$(b.attr('href')).attr('aria-hidden','false');$(b.attr('href')).css('visibility','visible');$($.UINavigationHistory[$.UINavigationHistory.length-1]).attr('ui-navigation-status','traversed');$($.UINavigationHistory[$.UINavigationHistory.length-1]).attr('aria-hidden','true');$($.UINavigationHistory[$.UINavigationHistory.length-1]).css('visibility','hidden');if($('#main').attr('ui-navigation-status')!=='traversed'){$('#main').attr('ui-navigation-status','traversed');$('#main').attr('aria-hidden','true');$('#main').css('visibility','hidden')}$.UINavigationHistory.push(d);c=b.closest('view');c.on('webkitTransitionEnd',function(a){if(z){if(a.type==='webkitTransitionEnd'){b.removeClass('disabled')}}else{if(a.propertyName==='-webkit-transform'){b.removeClass('disabled')}}})}catch(err){}};if($.userAction==='touchend'){$.app.on('touchstart','tablecell',function(a){var b=a.nodeType===1?$.ctx(a):$.ctx(this);$(b).addClass('touched');setTimeout(function(){$(b).removeClass('touched')},500)});$.app.on('touchcancel','tablecell',function(a){var b=a.nodeType===1?$.ctx(a):$.ctx(this);$(b).removeClass('touched')});$.app.on('click','tablecell',function(a){var b=a.nodeType===1?$.ctx(a):$.ctx(this);$(b).removeClass('touched');if($(b).hasAttr('href')){$.UINavigationListExits=true;if($(b).hasClass('disabled')){return}else{$(b).addClass('disabled');e(b)}}})}else{$.app.on('click','tablecell',function(a){var b=a.nodeType===1?$.ctx(a):$.ctx(this);if($(b).hasAttr('href')){$.UINavigationListExits=true;if($(b).hasClass('disabled')){return}else{$(b).addClass('disabled');e(b)}}})}},UINavigateToView:function(a){$.UINavigationListExits=true;$($.UINavigationHistory[$.UINavigationHistory.length-1]).attr('ui-navigation-status','traversed');$($.UINavigationHistory[$.UINavigationHistory.length-1]).attr('aria-hidden','true');$($.UINavigationHistory[$.UINavigationHistory.length-1]).css('visibility','hidden');$(a).attr('ui-navigation-status','current');$(a).attr('aria-hidden','false');$(a).css('visibility','visible');$.UINavigationHistory.push(a);if($.app.attr('ui-kind')==='navigation-with-one-navbar'){$('navbar uibutton[ui-implements=back]').css({'display':'block'})}},UINavigateToNextView:function(a){return $.UINavigateToView(a)},resetApp:function(c){if(c==="hard"){window.location.reload(true)}else{$._each($.views,function(a,b){$(b).attr("ui-navigation-status","upcoming");$(b).css("visibility","hidden")});$.main.attr("ui-navigation-status","current");$.main.css("visibility","visible");$.UINavigationHistory=["#main"]}},UITouchedTableCell:null,setupAriaForViews:function(){var c=$.els('view');$._each(c,function(a,b){if($(b).attr('ui-navigation-status')!=='current'){$(b).attr('aria-hidden','true');$(b).css('visibility','hidden')}else{$(b).attr('aria-hidden','false');$(b).css('visibility','visible')}})},UIStepper:function(b){var c=$(b.selector);var d=null;var e=null;var f=b.step;if(b.range.start>=0){var g=b.range.start||"";var h=b.range.end||"";var k=h-g;k++;e=[];if(f){var l=((h-g)/f);if(b.range.start===0){e.push(0)}else{e.push(g)}for(var i=1;i<l;i++){e.push(e[i-1]+f)}e.push(e[e.length-1]+f)}else{for(var j=0;j<k;j++){e.push(g+j)}}}var m=(b.indicator==="plus")?"<icon class='indicator'></icon>":"<icon></icon>";var n=b.buttonClass?" class='"+b.buttonClass+"' ":"";var o="<uibutton "+n+"ui-implements='icon'>"+m+"</uibutton>";var p="<uibutton "+n+"ui-implements='icon'>"+m+"</uibutton>";var q=o+"<label ui-kind='stepper-label'></label><input type='text'/>"+p;c.append(q);if(b.range.values){c.data('range-value',b.range.values.join(','))}if(!b.defaultValue){if(!!b.range.start||b.range.start===0){d=b.range.start===0?'0':b.range.start}else if(b.range.values instanceof Array){d=b.range.values[0];$('uibutton:first-of-type',b.selector).addClass('disabled')}}else{d=b.defaultValue}if(e){c.data('range-value',e.join(','))}$('label[ui-kind=stepper-label]',c).text(d);$('input',c).value=d;if(b.namePrefix){var r=b.namePrefix+'.'+c.id;$('input',c).attr('name',r)}else{$('input',c).attr('name',c.id)}if(d===b.range.start){$('uibutton:first-of-type',c).addClass('disabled')}if(d==b.range.end){$('uibutton:last-of-type',c).addClass('disabled')}$('uibutton:first-of-type',b.selector).on($.userAction,function(a){$.decreaseStepperValue.call(this,b.selector)});$('uibutton:last-of-type',b.selector).on($.userAction,function(a){$.increaseStepperValue.call(this,b.selector)})},decreaseStepperValue:function(a){var b=$(a).data('range-value');b=b.split(',');var c=$('label',a).text().trim();var d=b.indexOf(c);if(d!==-1){$('uibutton:last-of-type',a).removeClass('disabled');$('[ui-kind=stepper-label]',a).text(b[d-1]);$('input',a).val(b[d-1]);if(d===1){$(this).addClass('disabled')}}},increaseStepperValue:function(a){var b=$(a).data('range-value');b=b.split(',');var c=$('label',a).text().trim();var d=b.indexOf(c);if(d!==-1){$('uibutton:first-of-type',a).removeClass('disabled');$('label[ui-kind=stepper-label]',a).text(b[d+1]);$('input',a).val(b[d+1]);if(d===b.length-2){$(this).addClass('disabled')}}},resetSpinner:function(a){var b=$(a).data('range-value');b=b.split(',')[0];$(a).find('label').text(b);$(a).find('uibutton:first-of-type').addClass('disabled');$(a).find('uibutton:last-of-type').removeClass('disabled')},resetStepper:function(a){return this.resetSpinner(a)}});$.app.delegate('view','webkitTransitionEnd',function(){if(!$('view[ui-navigation-status=current]')){$($.UINavigationHistory[$.UINavigationHistory.length-2]).attr('ui-navigation-status','current');$.UINavigationHistory.pop()}$.UINavigationEvent=false});$.UINavigationList();if($.userAction==='touchend'){$.app.on('touchstart','uibutton',function(a){var b=a.nodeType===1?$.ctx(a):$.ctx(this);$(b).addClass('touched')});$.app.on('touchend','uibutton',function(a){var b=a.nodeType===1?$.ctx(a):$.ctx(this);$(b).removeClass('touched');if($(b).attr('ui-implements')==='back'){if($.UINavigationListExits){$.UINavigateBack();$.UINavigationEvent=false}}});$.app.on('touchcancel','uibutton',function(a){var b=a.nodeType===1?$.ctx(a):$.ctx(this);$(b).removeClass('touched')})}else{$.app.on($.userAction,'uibutton',function(a){var b=a.nodeType===1?$.ctx(a):$.ctx(this);if($(b).attr('ui-implements')==='back'){if($.UINavigationListExits){$.UINavigateBack();$.UINavigationEvent=false}}})};$.UIEnableScrolling();$.app.UIInitSwitchToggling();$.extend($,{UIPaging:function(i,j){var k=new iScroll(i.firstElementChild,j);var l=null;l=$('stack',i);var m=l.childElements();$(i).parent().attr('ui-scroller','myPager');var n=$(i).parent().css('width');var o=$.UIUuid();var p='<stack id="'+o+'" ui-implements="indicators" role="radiogroup" style="width:"'+n+';">';m.eq(0).addClass('active');var q=l.childElements();$._each([].slice.apply(q),function(a,b){if(a===0){p+='<indicator class="active" title="page 1 of'+q.length+'"><input type="radio" name="group'+o+'"></indicator>'}else{$(b).attr('aria-hidden','true');p+="<indicator title='"+(a+1)+" of "+q.length+"'><input type='radio' name='group"+o+"'></indicator>"}});p+="</stack>";$(i).parent().append(p);var r=$('#'+o);r.UIIdentifyChildNodes();var s=r.childElements();$(r).on('click','indicator',function(c){var d=c.nodeType===1?$.ctx(c):$.ctx(this);var e=$(d).attr('ui-child-position');k.scrollToPage(e,0);var f=m[e]._first();$._each(s,function(a,b){$(b).removeClass('active');m.eq(a).removeClass('active');m.eq(a).attr('aria-hidden','true');m.eq(a).attr('visibility','hidden')});$(d).addClass('active');var g=m.eq($(d).attr('ui-child-position'));g.addClass('active');g.removeAttr('aria-hidden');var h=g._first();h.attr('tabindex','-1')})},UISetupPaging:function(){if($("stack[ui-implements=paging]")){var e=$.els("stack[ui-implements=paging]");$._each(e,function(b,c){var d=c.nextElementSibling;$.UIPaging(c,{snap:true,momentum:false,hScrollbar:false,onScrollEnd:function(){var a=c.nextElementSibling;$(a).find('indicator.active').removeClass('active');$(a).find('indicator:nth-child('+(Number(this.currPageX)+1)+')').addClass('active')}})})}}});$(function(){$.UISetupPaging()});$.extend($,{UIDeleteTableCell:function(e){var f;if(e.editButton){f=e.editButton[0]}else{f='Edit'}var g;if(e.editButton){g=e.editButton[1]}else{g='Done'}var h;if(e.deleteButton){h=e.deleteButton}else{h='Delete'}var i=e.callback||function(){};this.deletionList=[];var j=$(e.selector);var k=$(e.toolbar);var l=k._first();l=l.reduceToNode();try{if(l&&l.nodeName==='UIBUTTON'){l.attr('ui-contains','uibutton')}}catch(err){}var m=$.concat('<uibutton role="button" ui-kind="deletionListDeleteButton" ui-bar-align="left" ui-implements="delete" class="disabled" style="display: none;"><label>',h,'</label></uibutton>');var n=$.concat('<uibutton role="button" ui-kind="deletionListEditButton" ui-bar-align="right"  ui-implements="edit"',' ui-button-labels="',f,' ',g,'"><label>',f,'</label></uibutton>');$(k).prepend(m);$(k).append(n);var o='<deletedisclosure><span><svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" width="18" height="18" viewBox="0 0 48 48" id="svg3804" xml:space="preserve"><path d="M 35.465895,6.1655247 43.279492,11.956238 21.764356,40.49005 5.4540477,27.811351 l 5.8969333,-7.344633 8.291376,6.489244 z" id="path3908" style="fill:#ffffff;fill-opacity:1;stroke:none" /></svg></span></deletedisclosure>';$._each($.els(e.selector+" > tablecell"),function(a,b){$(b).prepend(o)});j.attr('data-deletable-items','0');var p=function(){$(e.toolbar+' > uibutton[ui-implements=edit]').on($.userAction,function(){if($('label',this).text()===f){$(this).UIToggleButtonLabel(f,g);$(this).attr('ui-implements','done');j.addClass('ui-show-delete-disclosures');$(this).parent()._first().css({'display':'-webkit-inline-box'});var c=k.childElements();var d=c.eq(0).reduceToNode();d=d.nodeName;if(/uibutton/i.test(d)){k.childElements().eq(1).css('display','none')}$._each($.els("tablecell > img",j),function(a,b){$(b).css('-webkit-transform','translate3d(40px, 0, 0)')})}else{$(this).UIToggleButtonLabel(f,g);$(this).removeAttr('ui-implements');$(this).parent()._first().css('display','none');$(this).parent().childElements().eq(1).css('display','block');j.removeClass('ui-show-delete-disclosures');$._each($.els('deletedisclosure'),function(a,b){$(b).removeClass('checked');$(b).closest('tablecell').removeClass('deletable')});if(/uibutton/i.test(d)){c.eq(1).css('display','-webkit-inline-box')}$('uibutton[ui-implements=delete]').addClass('disabled');$._each($.els('tablecell > img',j),function(a,b){$(b).css('-webkit-transform','translate3d(0, 0, 0)')})}})};var q=function(){$._each($.els('deletedisclosure'),function(a,b){$(b).on($.userAction,function(){$(b).toggleClass('checked');$(b).closest('tablecell').toggleClass('deletable');$('uibutton[ui-implements=delete]',k).removeClass('disabled');if(!$(b).closest('tablecell').hasClass('deletable')){if(Number(j.attr("data-deletable-items"))<2){j.attr("data-deletable-items",'0');k.find("uibutton[ui-implements=delete]").addClass("disabled")}else{j.attr("data-deletable-items",Number(j.attr("data-deletable-items"))-1)}}else{j.attr('data-deletable-items',Number(j.attr("data-deletable-items"))+1)}})})};var r=function(){$._each($.els('uibutton[ui-implements=delete]'),function(c,d){$(d).on('click',function(){if($(this).hasClass('disabled')){return}$._each($.els('.deletable'),function(a,b){j.attr('data-deletable-items',parseInt(j.attr('data-deletable-items'),10)-1);if(!!i){i.call(this,b)}$(b).remove();j.attr('data-deletable-items','0')});$(this).addClass('disabled')});$(this).closest('view').find('scrollpanel').data('ui-scroller').refresh()})};p();q();r()},UIResetDeletionList:function(c,d){c=$(c);d=$(d);if(c.hasClass("ui-show-delete-disclosures")){c.attr("data-deletable-items",0);$._each(c.childElements(),function(a,b){try{$(b)._first().removeClass('checked')}catch(err){}});c.find("deletedisclosure").removeClass("checked");c.removeClass("ui-show-delete-disclosures");var e=d.find("uibutton[ui-kind=deletionListEditButton]").attr("ui-button-labels");e=e.split(" ");e=e[0];d.find("uibutton[ui-kind=deletionListEditButton] > label").text(e);d.find("uibutton[ui-kind=deletionListEditButton]").attr("ui-implements","edit");d.find("uibutton[ui-kind=deletionListDeleteButton]").css("display","none");d.find("uibutton[ui-kind=deletionListDeleteButton]").toggleClass('disabled');$._each($.els("tablecell > img",c),function(a,b){$(b).css('-webkit-transform','translate3d(0, 0, 0)')})}$._each($.els('tablecell',c),function(a,b){$(b).removeClass('deletable')})},UIPopUpIsActive:false,UIPopUpIdentifier:null,UIPopUp:function(c){var d=c.id||$.UIUuid();var f=c.title||'Alert!';var g=c.message||'';var h=c.cancelUIButton||'Cancel';var i=c.continueUIButton||'Continue';var j=c.callback||function(){};var k=$.concat('<popup role="alertdialog" id=',d,' ui-visible-state="hidden" aria-hidden="true"><panel><h1>',f,'</h1></toolbar>						<p role="note">',g,'</p><toolbar ui-placement="bottom"><uibutton role="button" ui-kind="action" ui-implements="cancel"><label>',h,'</label></uibutton><uibutton role="button" ui-kind="action" ui-implements="continue"><label>',i,'</label>							</uibutton></toolbar></panel></popup>');$('app').append(k);var l='#'+d;$(l).UIBlock('0.5');var m='#'+d+' uibutton';$._each($.els(m),function(a,b){$(b).on('click',cancelClickPopup=function(e){if($(b).attr('ui-implements')==='continue'){j.call(j,this)}e.preventDefault();$.UIClosePopup('#'+d);$('view[ui-navigation-status=current]').ariaShow();$('view[ui-navigation-status=current]').ariaFocusChild('h1')});$.UIPopUpIsActive=false;$.UIPopUpIdentifier=null;$(b).on('touchend',cancelTouchPopup=function(e){if($(this).attr('ui-implements')==='continue'){j.call(j,this)}e.preventDefault();$.UIClosePopup('#'+d);$('view[ui-navigation-status=current]').ariaShow();$('view[ui-navigation-status=current]').ariaFocusChild('h1')});$.UIPopUpIsActive=false;$.UIPopUpIdentifier=null})},UIShowPopUp:function(a){$.UIPopUp(a);$.UIPopUpIsActive=true;$.UIPopUpIdentifier='#'+a.id;$($.UIPopUpIdentifier).attr('aria-hidden','false');var b=$('mask');b.on('touchmove',function(e){e.preventDefault()});$.UIPositionPopUp('#'+a.id);var c=$('#'+a.id);c.UICenterElementToParent();b.attr('ui-visible-state','visible');c.attr('ui-visible-state','visible');c.ariaFocusChild('h1');$('view[ui-navigation-status=current]').attr('aria-hidden','true');$('view[ui-navigation-status=current]').ariaHide();$('view[ui-navigation-status=current]').css('display','none');$('view[ui-navigation-status=current]').css('display','block')},UIPositionPopUp:function(a){$.UIPopUpIsActive=true;$.UIPopUpIdentifier=a;var b=$(a).reduceToNode();var c=((window.innerHeight/2)+window.pageYOffset)-(b.clientHeight/2)+'px';var d=((window.innerWidth/2)-(b.clientWidth/2)+'px');$(b).css({left:d,top:c})},UIClosePopup:function(a){$(a+' uibutton[ui-implements=cancel]').UIRemovePopupBtnEvents('click','cancelClickPopup');$(a+' uibutton[ui-implements=continue]').UIRemovePopupBtnEvents('click','cancelTouchPopup');$(a).UIUnblock();$('view[ui-navigation-status=current]').removeAttr('aria-hidden');$('view[ui-navigation-status=current]').ariaFocusChild('h1');$(a).remove();$.UIPopUpIdentifier=null;$.UIPopUpIsActive=false},UIRepositionPopupOnOrientationChange:function(){$.body.bind('orientationchange',function(){if(window.orientation===90||window.orientation===-90){if($.UIPopUpIsActive){$.UIPositionPopUp($.UIPopUpIdentifier)}}else{if($.UIPopUpIsActive){$.UIPositionPopUp($.UIPopUpIdentifier)}}});window.addEventListener('resize',function(){if($.UIPopUpIsActive){$.UIPositionPopUp($.UIPopUpIdentifier)}},false)},UIShowActionSheet:function(a){$.app.data('ui-action-sheet-id',a);var b=$(a);b.css('display','block');b.UIBlock();b.attr('aria-hidden','false');$('view[ui-navigation-status=current]').css('display','none');setTimeout(function(){$('view[ui-navigation-status=current]').css('display','-webkit-box')},100);setTimeout(function(){b.ariaFocusChild('h3')},1000);$('view[ui-navigation-status=current]').attr('aria-hidden','true');var c=$('mask');c.css({'opacity':'.5'});c.attr('ui-visible-state','visible');setTimeout(function(){$(a).removeClass('hidden')},1);c.on('touchmove',function(e){e.preventDefault()});$(a).find('scrollpanel').data('ui-scroller').refresh()},UIHideActionSheet:function(){var a=$.app.data('ui-action-sheet-id');actionSheet=$(a);try{actionSheet.addClass('hidden');actionSheet.UIUnblock();actionSheet.attr('aria-hidden','true');$('view[ui-navigation-status=current]').removeAttr('aria-hidden');actionSheet.css('display','none');$('view[ui-navigation-status=current]').ariaFocusChild('h1')}catch(e){}$.app.removeData('ui-action-sheet-id')},UIReadjustActionSheet:function(){var a='';if($.app.data('ui-action-sheet-id')){a=$.app.data('ui-action-sheet-id');$(a).css({'right':'0px','bottom':'0px','left':'0px'});if($.touchEnabled){if($.standalone){$(a).css({'right':'0px','bottom':'0px','left':'0px'})}else{$(a).css({'right':'0px','bottom':'0px','left':'0px','-webkit-transform':'translate3d(0,0,0)'})}}}$.UIPositionMask()},UIAlphabeticalList:function(){var c=y?$("tableview[ui-kind='titled-list alphabetical']"):$("tableview[ui-kind='titled-list alphabetical']")[0];if(c){var d=$("tableview[ui-kind='titled-list alphabetical']");var e=[];var f=$.UIUuid();var g=0;var h='<stack ui-kind="alphabetical-list">';var i="";var j=d.findAll("tableheader");$._each(j,function(a,b){b=$(b);e.push(b.text());g++;b.attr("id",$.concat("alpha_",b.text(),f,g));i+=$.concat('<span href="#alpha_',b.text(),f,g,' ">',b.text(),'</span>')});h+=i+'</stack>';d.closest("scrollpanel").after(h)}else{return}var k=$("tableview[ui-kind='titled-list alphabetical']").closest("scrollpanel");var l=k.reduceToNode();k.data('ui-scroller').destroy();var m=new iScroll(l,{snap:true});k.data('ui-scroller',m);$.app.on("click","stack[ui-kind='alphabetical-list'] > span",function(a){var b=$.ctx(a)||$(this);k.data('ui-scroller').scrollToElement(b.attr("href"))})},UIPositionMask:function(){if($.els("mask").length>0){$("mask").css({"height":+(window.innerHeight+window.pageYOffset),width:+window.innerWidth})}},UICancelSplitViewToggle:function(){$.body.addClass('SplitViewFixed')},rootview:$('rootview'),resizeEvt:('onorientationchange'in window?'orientationchange':'resize'),UISplitView:function(){if($.body.hasClass('SplitViewFixed')){return}var c=$("rootview > panel > view[ui-navigation-status=current] > navbar").text();$("detailview > navbar").append("<uibutton id ='showRootView'  class='navigation' ui-bar-align='left'>"+c+"</uibutton>");if(window.innerWidth>window.innerHeight){$.body.addClass("landscape");$.body.removeClass("portrait");$.rootview.css({display:"block",height:"100%","margin-bottom":"1px"});$._each($.els('rootview scrollpanel'),function(a,b){$(b).css({overflow:"hidden",height:($.rootview.innerHeight-45)+'px'});$(b).data('ui-scroller').refresh()})}else{$.body.addClass("portrait");$.body.removeClass("landscape");$.rootview.css({display:'none','height':(window.innerHeight-100)+"px"});$._each($.els('rootview scrollpanel'),function(a,b){$(b).css({overflow:"hidden",height:(window.innerHeight-155)+'px'});$(b).data('ui-scroller',new iScroll(b))})}$("detailview navbar h1").text($.els("tableview[ui-implements=detail-menu] > tablecell").eq(0).text())},UISetSplitviewOrientation:function(){if($.body.hasClass("SplitViewFixed")){return}if($.resizeEvt){if(window.innerWidth>window.innerHeight){$.body.addClass("landscape");$.body.removeClass("portrait");$.rootview.css({display:"block",height:"100%","margin-bottom":"1px"});$._each($.els('rootview scrollpanel'),function(a,b){$(b).css({overflow:"hidden",height:"100%"});$(b).data('ui-scroller').refresh()});$.app.UIUnblock()}else{$.app.UIUnblock();$.body.addClass("portrait");$.body.removeClass("landscape");$.rootview.css({display:"none",height:(window.innerHeight-100)+'px'});$._each($.els('rootview scrollpanel'),function(a,b){$(b).css({overflow:"hidden",height:(window.innerHeight-155)+'px'});$(b).data('ui-scroller').refresh()})}$.UIEnableScrolling()}},UIToggleRootView:function(){if($.body.hasClass("SplitViewFixed")){return}if($.rootview.css("display")==="none"){$.rootview.css("display","block");$.app.UIBlock(".01");$._each($.els('rootview scrollpanel'),function(a,b){$(b).data('ui-scroller').refresh()})}else{$.rootview.css("display","none");$.app.UIUnblock();$._each($.els('rootview scrollpanel'),function(a,b){$(b).data('ui-scroller').refresh()})}},UICheckForSplitView:function(){if($.body.hasClass("SplitViewFixed")){return}var a=$("splitview");if(a)a=a.reduceToNode();if(a){$.UISplitView();$("#showRootView").on("click",function(){$.UIToggleRootView()});$.body.on("orientationchange",function(){$.UISetSplitviewOrientation()});window.onresize=function(){$.UISetSplitviewOrientation()}}},UICurrentSplitViewDetail:null,determineMaxPopoverHeight:function(){var a=window.innerHeight;var b;try{if($('navbar')){b=$('navbar').clientHeight}var c=$('toolbar').reduceToNode();if(c){if(!$('toolbar').attr('ui-placement')){b=c.clientHeight}}}catch(err){}a=a-b;return a},determinePopoverWidth:function(){var a=window.innerWidth},adjustPopoverHeight:function(a){var b=$.determineMaxPopoverHeight();$(a).find("section").css({"max-height":(b-100)+"px"});var c=a.split("#");c=c[1]},determinePopoverPosition:function(a,b,c){b=b.toLowerCase();c=c.toLowerCase();var d=$(a).reduceToNode();var e={};switch(b){case'top':if(c==='left'){e.left=d.offsetLeft+'px'}else if(c==='center'){e.left=(d.offsetLeft+(d.offsetWidth/2)-160)+'px'}else{e.left=((d.offsetLeft+d.offsetWidth)-320)+'px'}e.top=(d.offsetTop+d.offsetHeight+20)+'px';break;case'right':if(c==='top'){e.top=(d.getTop()+2)+'px'}else if(c==='center'){e.top=(d.getTop()-(d.offsetHeight/2)-20)+'px'}else{e.top=(d.getTop()-d.offsetHeight-20)+'px'}e.left=((d.getLeft()-330)-2)+'px';break;case'bottom':if(c==='left'){e.left=d.offsetLeft+'px'}else if(c==='center'){e.left=(d.offsetLeft+(d.offsetWidth/2)-160)+'px'}else{e.left=((d.offsetLeft+d.offsetWidth)-320)+'px'}e.bottom=(d.offsetTop+d.offsetHeight+20)+'px';break;case'left':if(c==='top'){e.top=(d.getTop()+2)+'px'}else if(c==='center'){e.top=(d.getTop()-(d.offsetHeight/2)-20)+'px'}else{e.top=(d.getTop()-d.offsetHeight-20)+'px'}e.left=(d.offsetLeft+d.offsetWidth+20)+'px';break;default:e.left=(d.getTop()+d.offsetHeight)+'px';e.top=(d.offsetTop+d.offsetHeight+20)+'px';break}return e},UIPopover:function(a){var b='';var c='';var d=a.triggerElement;var e=a.popoverOrientation;var f=a.pointerOrientation;if(a){c=a.id?a.id:$.UIUuid();b=a.title?$.concat('<h3>',a.title,'</h3>'):""}var g=$(d);var h=$.determinePopoverPosition(d,e,f);var i=$.concat('<popover ','id="',c,'" ui-pointer-position="',e,'-',f,'"',' data-popover-trigger="#',g.attr("id"),'" data-popover-orientation="',e,'" data-popover-pointer-orientation="',f,'"><header>',b,'</header><section><scrollpanel class="popover-content"></scrollpanel></section></popover>');i;$.app.append(i);$('#'+c).css(h);if(!!a.id){$.adjustPopoverHeight("#"+a.id);$("#"+a.id).UIAdjustPopoverPosition()}},UICancelPopover:function(a){$.UIHidePopover(a)},UIHidePopover:function(a){$.UIPopover.activePopover=null;$(a).css({"opacity":0,"-webkit-transform":"scale(0)"});a.UIUnblock()},UIEnablePopoverScrollpanels:function(c){try{var d=0;$._each($.els("popover scrollpanel"),function(a,b){$(b).data('ui-scroller',new iScroll(b.parentNode))})}catch(e){}},form2JSON:function(k,l){k=$.el(k);l=l||'.';var m=getFormValues(k);var n={};var o={};function getFormValues(a){var b=[];var c=a.firstChild;while(c){if(c.nodeName.match(/INPUT|SELECT|TEXTAREA/i)){b.push({name:c.name,value:getFieldValue(c)})}else{var d=getFormValues(c);b=b.concat(d)}c=c.nextSibling}return b}function getFieldValue(a){if(a.nodeName==='INPUT'){if(a.type.toLowerCase()==='radio'||a.type.toLowerCase()==='checkbox'){if(a.checked){return a.value}}else{if(!a.type.toLowerCase().match(/button|reset|submit|image/i)){return a.value}}}else{if(a.nodeName==='TEXTAREA'){return a.value}else{if(a.nodeName==='SELECT'){return getSelectedOptionValue(a)}}}return''}function getSelectedOptionValue(c){var d=c.multiple;if(!d){return c.value}if(c.selectedIndex>-1){var e=[];var f=$.els('option',c);$._each(function(a,b){if(b.selected){e.push(b.value)}});return e}}$._each(m,function(a,b){var c=b.value;if(c!==''){var d=b.name;var e=d.split(l);var f=n;for(var j=0;j<e.length;j++){var g=e[j];var h;if(g.indexOf('[]')>-1&&j==e.length-1){h=g.substr(0,g.indexOf('['));if(!f[h])f[h]=[];f[h].push(c)}else{if(g.indexOf('[')>-1){h=g.substr(0,g.indexOf('['));var i=g.replace(/^[a-z]+\[|\]$/gi,'');if(!o[h]){o[h]={}}if(!f[h]){f[h]=[]}if(j==e.length-1){f[h].push(c)}else{if(!o[h][i]){f[h].push({});o[h][i]=f[h][f[h].length-1]}}f=o[h][i]}else{if(j<e.length-1){if(!f[g]){f[g]={}}f=f[g]}else{f[g]=c}}}}}});return n}});$.extend($.UIPopover,{activePopover:null,show:function(a){if($.UIPopover.activePopover===null){a.UIBlock(".01");a.UIRepositionPopover();var b=function(){a.css({"opacity":1,"-webkit-transform":"scale(1)",'overflow':'visible'})};setTimeout(function(){b()},0);$.UIPopover.activePopover=a.id||a[0].id;$.UIEnableScrolling()}else{return}$.UIEnablePopoverScrollpanels()},hide:function(a){if($.UIPopover.activePopover){a.css({"opacity":0,"-webkit-transform":"scale(0)"});$.UIPopover.activePopover=null}}});window.onresize=function(){var c=$.determineMaxPopoverHeight();$._each($.els("popover"),function(a,b){$(b).find("section").css({"max-height":(c-100)+'px'});$(b).UIRepositionPopover()})};$.app.on("click","mask",function(a){var b=a||$(this);if($.UIPopover.activePopover){$.UIPopover.hide($("#"+$.UIPopover.activePopover));$.app.UIUnblock()}if($.rooview&&$.rootview.css("position")==="absolute"){$.rootview.style.display="none";$.rootview.UIUnblock()}})});document.addEventListener('orientationchange',function(){$.UIReadjustActionSheet()},false);$(function(){$.UICheckForSplitView();if(!typeof $.rootview==='object'){$('body').on('click','mask',function(){try{$.rootview.css('display','none');$.rootview.UIUnblock()}catch(err){}})}if("stack[ui-kind='titled-list alphabetical']"){$.UIAlphabeticalList()}$.UIRepositionPopupOnOrientationChange();$._each($.els('uibutton'),function(a,b){$(b).attr('role','button')})})})();